{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///C:/Repos/ChallengeApp/challengeapp-ui/src/pages/index.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport axios from \"axios\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\ntype LoginResponse = {\r\n  token: string;\r\n  user: {\r\n    email: string;\r\n    role: string;\r\n  };\r\n};\r\n\r\nexport default function LoginPage() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) return;\r\n\r\n    try {\r\n      const decoded = jwtDecode<{ exp?: number }>(token);\r\n      if (!decoded.exp || Date.now() < decoded.exp * 1000) {\r\n        router.push(\"/dashboard\");\r\n      }\r\n    } catch {}\r\n  }, [router]);\r\n\r\n  const handleLogin = async () => {\r\n    try {\r\n      const response = await axios.post<LoginResponse>(\r\n        `${process.env.NEXT_PUBLIC_API_URL}/auth/login`,\r\n        { email, password }\r\n      );\r\n\r\n      const { token, user } = response.data;\r\n      localStorage.setItem(\"token\", token);\r\n      localStorage.setItem(\"userEmail\", user.email);\r\n      localStorage.setItem(\"userRole\", user.role);\r\n\r\n      router.push(\"/dashboard\");\r\n    } catch {\r\n      setError(\"Invalid credentials or connection error.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row justify-content-center\">\r\n        <div className=\"col-md-6 col-lg-4\">\r\n          <div className=\"card shadow-sm mt-5\">\r\n            <div className=\"card-body p-4\">\r\n              <h2 className=\"text-center mb-4\">ChallengeApp Login</h2>\r\n              <form>\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"email\" className=\"form-label\">\r\n                    Email address\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    className=\"form-control\"\r\n                    id=\"email\"\r\n                    placeholder=\"Enter your email\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"password\" className=\"form-label\">\r\n                    Password\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    className=\"form-control\"\r\n                    id=\"password\"\r\n                    placeholder=\"Enter your password\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                  />\r\n                </div>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-primary w-100\"\r\n                  onClick={handleLogin}\r\n                >\r\n                  Sign in\r\n                </button>\r\n                {error && (\r\n                  <div className=\"alert alert-danger mt-3\" role=\"alert\">\r\n                    {error}\r\n                  </div>\r\n                )}\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;;;;;;AAUe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+GAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IACnC,MAAM,SAAS,IAAA,oIAAS;IAExB,IAAA,gHAAS,EAAC;QACR,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,CAAC,OAAO;QAEZ,IAAI;YACF,MAAM,UAAU,IAAA,uIAAS,EAAmB;YAC5C,IAAI,CAAC,QAAQ,GAAG,IAAI,KAAK,GAAG,KAAK,QAAQ,GAAG,GAAG,MAAM;gBACnD,OAAO,IAAI,CAAC;YACd;QACF,EAAE,OAAM,CAAC;IACX,GAAG;QAAC;KAAO;IAEX,MAAM,cAAc;QAClB,IAAI;YACF,MAAM,WAAW,MAAM,qHAAK,CAAC,IAAI,CAC/B,oEAAmC,WAAW,CAAC,EAC/C;gBAAE;gBAAO;YAAS;YAGpB,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,SAAS,IAAI;YACrC,aAAa,OAAO,CAAC,SAAS;YAC9B,aAAa,OAAO,CAAC,aAAa,KAAK,KAAK;YAC5C,aAAa,OAAO,CAAC,YAAY,KAAK,IAAI;YAE1C,OAAO,IAAI,CAAC;QACd,EAAE,OAAM;YACN,SAAS;QACX;IACF;IAEA,qBACE,qKAAC;QAAI,WAAU;kBACb,cAAA,qKAAC;YAAI,WAAU;sBACb,cAAA,qKAAC;gBAAI,WAAU;0BACb,cAAA,qKAAC;oBAAI,WAAU;8BACb,cAAA,qKAAC;wBAAI,WAAU;;0CACb,qKAAC;gCAAG,WAAU;0CAAmB;;;;;;0CACjC,qKAAC;;kDACC,qKAAC;wCAAI,WAAU;;0DACb,qKAAC;gDAAM,SAAQ;gDAAQ,WAAU;0DAAa;;;;;;0DAG9C,qKAAC;gDACC,MAAK;gDACL,WAAU;gDACV,IAAG;gDACH,aAAY;gDACZ,OAAO;gDACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kDAG5C,qKAAC;wCAAI,WAAU;;0DACb,qKAAC;gDAAM,SAAQ;gDAAW,WAAU;0DAAa;;;;;;0DAGjD,qKAAC;gDACC,MAAK;gDACL,WAAU;gDACV,IAAG;gDACH,aAAY;gDACZ,OAAO;gDACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kDAG/C,qKAAC;wCACC,MAAK;wCACL,WAAU;wCACV,SAAS;kDACV;;;;;;oCAGA,uBACC,qKAAC;wCAAI,WAAU;wCAA0B,MAAK;kDAC3C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUrB","debugId":null}}]
}